<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName {{ host_name }}
    ServerAdmin {{ server_admin_email }}
    DocumentRoot {{ project_path }}{{ host_name }}

    <Directory "{{ project_path }}{{ host_name }}">
        DirectoryIndex index.php index.html index.htm
        Options -Indexes +FollowSymLinks
        AllowOverride None
    </Directory>

    ErrorLog /var/log/httpd/{{ host_name }}-error.log
    CustomLog /var/log/httpd/{{ host_name }}-access.log combined

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/{{ host_name }}/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/{{ host_name }}/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/{{ host_name }}/chain.pem

    RewriteEngine On
    #如果請求 /index.php，則不重導
    RewriteRule ^index\.php$ -
    #條件：路徑不會對應檔案
    RewriteCond %{REQUEST_URI} !-f
    #條件：路徑不會對應資料匣
    RewriteCond %{REQUEST_URI} !-d
    #全部導向根路徑的 index.php
    RewriteRule . /index.php

</VirtualHost>
</IfModule>